(this["webpackJsonpflowchart-example"]=this["webpackJsonpflowchart-example"]||[]).push([[0],{137:function(e,t,n){},321:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(17),a=n.n(c),o=(n(137),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,322)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))}),i=n(29),s=n(131),u=n(18),d={isSidebarOpen:!0},l={graphData:null,selectedNodes:null},b=Object(i.b)({sidebarReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_SIDEBAR_OPEN":var n=t.payload.isSidebarOpen;return Object(u.a)(Object(u.a)({},e),{},{isSidebarOpen:n});default:return e}},graphReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_GRAPH_DATA":console.log("setting graph data");var n=t.payload.graphData;return Object(u.a)(Object(u.a)({},e),{},{graphData:n});case"SET_SELECTED_NODES":var r=t.payload.selectedNodes;return Object(u.a)(Object(u.a)({},e),{},{selectedNodes:r});default:return e}}}),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,j=Object(i.d)(b,f(Object(i.a)(s.a))),h=n(5),p=n(132),O=n(6),v=n(15),g=n.n(v),x=n(55);function y(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={},r=0;r<e;r++)n[r]=D(r+1);for(var c=[],a=0;a<t;a++)c[a]=null;var o={},i=m(1,2),s=i.key,u=i.mockEdge;o[s]=u;for(var d=1;d<e-1;d++){var l=S(0,t),b=c[l]?c[l]:d+1,f=m(b,d+2),j=f.key,h=f.mockEdge;o[j]=h,E(10)&&(c[l]=d+1)}return console.log("finished creating data"),{data:[{graph:{Vertices:n,Edges:o}}]}}function E(e){return S(0,100)>=e}function m(e,t){var n="<".concat(e,",").concat(t,">");return{key:n,mockEdge:{Id:n,From:{Id:"".concat(e)},To:{Id:"".concat(t)}}}}function D(e){return{Id:"".concat(e),Properties:{},Type:S(1,15),WindowID:4}}function S(e,t){return Math.floor(Math.random()*t)+e}var w={getGraphData:function(){var e=Object(x.a)(g.a.mark((function e(){var t,n=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:100,e.abrupt("return",y(t,3));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function N(e){return function(){var t=Object(x.a)(g.a.mark((function t(n){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getGraphData(e);case 2:r=t.sent,n({type:"SET_GRAPH_DATA",payload:{graphData:r}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var T=n(77),k=n.n(T),R=n(9),I=n(1);var _=Object(h.b)((function(e){return{selectedNodes:e.graphReducer.selectedNodes}}),{})((function(e){var t=e.selectedNodes,n=e.data,c=e.selected,a=Object(r.useState)(!1),o=Object(O.a)(a,2),i=o[0],s=o[1];return Object(r.useEffect)((function(){if(!t)return s(!1);var e=!!t.find((function(e){return e.id===n.Id}));s(e)}),[t,n.Id]),Object(I.jsxs)("div",{style:{borderRadius:"50%",height:50,width:50,border:"1px solid black",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"white"},children:[Object(I.jsx)(R.a,{type:"source",position:"bottom"}),Object(I.jsx)("div",{children:n.Id}),Object(I.jsx)("div",{children:c&&"selected"}),Object(I.jsx)("div",{children:i&&"variant"}),Object(I.jsx)(R.a,{type:"target",position:"top"})]})}));var C=Object(h.b)((function(e){return{selectedNodes:e.graphReducer.selectedNodes}}),{})((function(e){var t=e.selectedNodes,n=e.data,c=Object(r.useState)(0),a=Object(O.a)(c,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){if(!t||!t.length)return i(0)}),[t]),Object(r.useEffect)((function(){var e=n.lowestNodePos+50+25-n.yPos;i(e)}),[n]),t&&t.length?Object(I.jsx)("div",{style:{height:o,width:n.width,border:"1px solid black",backgroundColor:"yellow",borderRadius:"3px"},children:Object(I.jsx)(R.a,{type:"source",position:"bottom"})}):Object(I.jsx)("div",{})}));var G={setGraphData:N,setSelectedNodes:function(e){return function(t){t({type:"SET_SELECTED_NODES",payload:{selectedNodes:e}})}}},P=Object(h.b)((function(e){var t=e.graphReducer;return{graphData:t.graphData,selectedNodes:t.selectedNodes}}),G)((function(e){var t=e.setGraphData,n=e.graphData,c=e.setSelectedNodes,a=e.selectedNodes,o=Object(r.useState)(null),i=Object(O.a)(o,2),s=i[0],u=i[1],d=Object(r.useState)(!0),l=Object(O.a)(d,2),b=l[0],f=l[1],j=Object(r.useState)(!1),h=Object(O.a)(j,2),v=h[0],g=h[1],x=Object(r.useRef)(null),y=Object(r.useRef)(0),E=Object(r.useRef)(null);Object(r.useEffect)((function(){t()}),[]),Object(r.useEffect)((function(){m()}),[a]),Object(r.useEffect)((function(){f(!0),y.current=Date.now(),S(),D()}),[n]),Object(r.useEffect)((function(){var e;y.current&&(e=function(){console.log("time from getting data",Date.now()-y.current),f(!1)},setTimeout((function(){requestAnimationFrame(e)})))}));var m=function(){if(a){var e,t,n,r;if(a.forEach((function(r){(!t||t>r.position.x)&&(t=r.position.x),(!n||n>r.position.y)&&(n=r.position.y),(!e||e<r.position.y)&&(e=r.position.y)})),a){r=Object(p.a)(x.current);var c={type:"border",id:"border",data:{xPos:t,yPos:n,width:75,lowestNodePos:e},position:{x:t-12.5,y:n-12.5},connectable:!1,draggable:!1,isHidden:!(a&&a.length)};r.unshift(c)}D(r)}},D=function(e){if(e)return u(e);if(e=x.current){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TB",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=new k.a.graphlib.Graph;c.setDefaultEdgeLabel((function(){return{}}));var a="LR"===t;c.setGraph({rankdir:t}),e.forEach((function(e){Object(R.e)(e)?c.setNode(e.id,{width:n,height:r}):c.setEdge(e.source,e.target)})),k.a.layout(c);var o=e.map((function(e){if(Object(R.e)(e)){var t=c.node(e.id);e.targetPosition=a?"left":"top",e.sourcePosition=a?"right":"bottom",e.position={x:t.x-n/2+Math.random()/1e3,y:t.y-r/2}}return e}));return console.log("built graph",Date.now()-y.current),o}(e,"TB",50,50);u(t)}},S=function(){var e=Date.now();g(!1);try{if(!n)return;var t={x:0,y:0},r=[],c=n.data[0].graph;Object.values(c.Edges).forEach((function(e){var t={id:e.Id,source:e.From.Id,target:e.To.Id,type:"brazier"};r.push(t)})),Object.values(c.Vertices).forEach((function(e){var n={type:"special",id:e.Id,data:e,position:t};r.push(n)})),x.current=r,console.log("parsing the data took",Date.now()-e)}catch(a){g(!0)}},w={special:_,border:C};return v?Object(I.jsx)("div",{children:"Error parsing the data"}):b?Object(I.jsx)("div",{children:"Loading..."}):s?Object(I.jsxs)("div",{children:[Object(I.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:[Object(I.jsx)("button",{onClick:function(){return D(null)},children:"Reorganize"}),Object(I.jsx)("button",{onClick:function(){console.log(E.current.toObject())},children:"to object"})]}),Object(I.jsx)("div",{style:{height:"800px",width:"1600px",margin:"1rem",border:"1px solid black",borderRadius:"0.25rem",padding:"1px"},children:Object(I.jsx)(R.b,{elements:s,nodeTypes:w,connectionLineType:"smoothstep",onSelectionChange:function(e){e?function(e){var t=[];(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=function e(n){var r=Object(R.d)(n,s);return t(n),1===r.length?e(r[0]):n},r=function e(n){var r=Object(R.c)(n,s);if(!r.length)return n;var c=Object(R.d)(r[0],s);return t(n),c.length>1?n:e(r[0])}(e),c=n(e)})(e,(function(e){!!t.find((function(t){return t.id===e.id}))||t.push(e)})),c(t)}(e[0]):c(null)},onlyRenderVisibleElements:!0,minZoom:.2,onLoad:function(e){E.current=e,console.log(Date.now()-y.current)}})})]}):Object(I.jsx)("div",{})}));var A=Object(h.b)((function(e){return{isSidebarOpen:e.sidebarReducer.isSidebarOpen}}),{})((function(e){return e.isSidebarOpen,Object(I.jsx)("div",{})}));var L={setGraphData:N},F=Object(h.b)((function(e){return{}}),L)((function(e){var t=e.setGraphData,n=Object(r.useState)(100),c=Object(O.a)(n,2),a=c[0],o=c[1];return Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(I.jsx)("h3",{children:"Generate random nodes"}),Object(I.jsx)("input",{value:a,onChange:function(e){var t=+e.target.value;isNaN(t)||o(t)}}),Object(I.jsx)("button",{onClick:function(){return t(a)},children:"Generate"})]})}));var J={importGraphData:function(e){return function(t){t({type:"SET_GRAPH_DATA",payload:{graphData:e}})}}},B=Object(h.b)((function(e){return{}}),J)((function(e){var t=e.importGraphData,n=Object(r.useState)(""),c=Object(O.a)(n,2),a=c[0],o=c[1],i=Object(r.useState)(!1),s=Object(O.a)(i,2),u=s[0],d=s[1];return Object(r.useEffect)((function(){if(a)try{JSON.parse(a),d(!0)}catch(e){d(!1)}}),[a]),Object(I.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(I.jsx)("h3",{children:"Import from JSON"}),Object(I.jsx)("input",{value:a,onChange:function(e){var t=e.target.value;o(t)}}),Object(I.jsx)("button",{onClick:function(){try{var e=JSON.parse(a);t(e)}catch(n){console.log(n),d(!1)}},disabled:!(a&&u),children:"Set graph from JSON"})]})}));a.a.render(Object(I.jsxs)(h.a,{store:j,children:[Object(I.jsxs)("header",{style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[Object(I.jsx)(F,{}),Object(I.jsx)(B,{})]}),Object(I.jsx)(P,{}),Object(I.jsx)(A,{})]}),document.getElementById("root")),o()}},[[321,1,2]]]);
//# sourceMappingURL=main.51aad5ba.chunk.js.map