(this["webpackJsonpflowchart-example"]=this["webpackJsonpflowchart-example"]||[]).push([[0],{135:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(16),c=n.n(a),o=(n(135),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,320)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))}),i=n(28),u=n(130),s=n(17),d={isSidebarOpen:!0},l={graphData:null,selectedNodes:null},f=Object(i.b)({sidebarReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_SIDEBAR_OPEN":var n=t.payload.isSidebarOpen;return Object(s.a)(Object(s.a)({},e),{},{isSidebarOpen:n});default:return e}},graphReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_GRAPH_DATA":var n=t.payload.graphData;return Object(s.a)(Object(s.a)({},e),{},{graphData:n});case"SET_SELECTED_NODES":var r=t.payload.selectedNodes;return Object(s.a)(Object(s.a)({},e),{},{selectedNodes:r});default:return e}}}),b=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.c,h=Object(i.d)(f,b(Object(i.a)(u.a))),p=n(10),j=n(22),O=n(14),v=n.n(O),g=n(53);function E(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={},r=0;r<e;r++)n[r]=y(r+1);for(var a=[],c=0;c<t;c++)a[c]=null;var o={},i=D(1,2),u=i.key,s=i.mockEdge;o[u]=s;for(var d=1;d<e-1;d++){var l=m(0,t),f=a[l]?a[l]:d+1,b=D(f,d+2),h=b.key,p=b.mockEdge;o[h]=p,x(10)&&(a[l]=d+1)}return console.log("finished creating data"),{data:[{graph:{Vertices:n,Edges:o}}]}}function x(e){return m(0,100)>=e}function D(e,t){var n="<".concat(e,",").concat(t,">");return{key:n,mockEdge:{Id:n,From:{Id:"".concat(e)},To:{Id:"".concat(t)}}}}function y(e){return{Id:"".concat(e),Properties:{},Type:m(1,15),WindowID:4}}function m(e,t){return Math.floor(Math.random()*t)+e}var S={getGraphData:function(){var e=Object(g.a)(v.a.mark((function e(){var t,n=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:100,e.abrupt("return",E(t,3));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function w(e){return function(){var t=Object(g.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.getGraphData(e);case 2:r=t.sent,n({type:"SET_GRAPH_DATA",payload:{graphData:r}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var T=n(76),I=n.n(T),N=n(11),R=n(1);var _=Object(p.b)((function(e){return{selectedNodes:e.graphReducer.selectedNodes}}),{})((function(e){var t=e.selectedNodes,n=e.data,a=e.selected,c=Object(r.useState)(!1),o=Object(j.a)(c,2),i=o[0],u=o[1];return Object(r.useEffect)((function(){if(!t)return u(!1);var e=!!t.find((function(e){return e.id===n.Id}));u(e)}),[t,n.Id]),Object(R.jsxs)("div",{style:{borderRadius:"50%",height:50,width:50,border:"1px solid black",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[Object(R.jsx)(N.a,{type:"source",position:"bottom"}),Object(R.jsx)("div",{children:n.Id}),Object(R.jsx)("div",{children:a&&"selected"}),Object(R.jsx)("div",{children:i&&"variant"}),Object(R.jsx)(N.a,{type:"target",position:"top"})]})}));var k={setGraphData:w,setSelectedNodes:function(e){return function(t){t({type:"SET_SELECTED_NODES",payload:{selectedNodes:e}})}}},C=Object(p.b)((function(e){return{graphData:e.graphReducer.graphData}}),k)((function(e){var t=e.setGraphData,n=e.graphData,a=e.setSelectedNodes,c=Object(r.useState)(null),o=Object(j.a)(c,2),i=o[0],u=o[1],s=Object(r.useState)(!0),d=Object(j.a)(s,2),l=d[0],f=d[1],b=Object(r.useRef)(null),h=Object(r.useRef)(0),p=Object(r.useRef)(null);Object(r.useEffect)((function(){t()}),[]),Object(r.useEffect)((function(){f(!0),h.current=Date.now(),v(),O()}),[n]),Object(r.useEffect)((function(){var e;h.current&&(e=function(){console.log("time from getting data",Date.now()-h.current),f(!1)},setTimeout((function(){requestAnimationFrame(e)})))}));var O=function(){if(b.current){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TB",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=new I.a.graphlib.Graph;a.setDefaultEdgeLabel((function(){return{}}));var c="LR"===t;a.setGraph({rankdir:t}),e.forEach((function(e){Object(N.e)(e)?a.setNode(e.id,{width:n,height:r}):a.setEdge(e.source,e.target)})),I.a.layout(a);var o=e.map((function(e){if(Object(N.e)(e)){var t=a.node(e.id);e.targetPosition=c?"left":"top",e.sourcePosition=c?"right":"bottom",e.position={x:t.x-n/2+Math.random()/1e3,y:t.y-r/2}}return e}));return console.log("built graph",Date.now()-h.current),o}(b.current,"TB",50,50);u(e)}},v=function(){var e=Date.now();if(n){var t={x:0,y:0},r=[],a=n.data[0].graph;Object.values(a.Edges).forEach((function(e){var t={id:e.Id,source:e.From.Id,target:e.To.Id,type:"smoothstep"};r.push(t)})),Object.values(a.Vertices).forEach((function(e){var n={type:"special",id:e.Id,data:e,position:t};r.push(n)})),b.current=r,console.log("parsing the data took",Date.now()-e)}},g={special:_};return l?Object(R.jsx)("div",{children:"Loading..."}):i?Object(R.jsxs)("div",{style:{height:"1000px",width:"1600px"},children:[Object(R.jsx)("button",{onClick:O,children:"Reorganize"}),Object(R.jsx)("button",{onClick:function(){console.log(p.current.toObject())},children:"to object"}),Object(R.jsx)(N.b,{elements:i,nodeTypes:g,connectionLineType:"smoothstep",onSelectionChange:function(e){e?function(e){var t=[];(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=function e(n){var r=Object(N.d)(n,i);return t(n),1===r.length?e(r[0]):n},r=function e(n){var r=Object(N.c)(n,i);if(!r.length)return n;var a=Object(N.d)(r[0],i);return t(n),a.length>1?n:e(r[0])}(e),a=n(e)})(e,(function(e){!!t.find((function(t){return t.id===e.id}))||t.push(e)})),a(t)}(e[0]):a(null)},onlyRenderVisibleElements:!0,minZoom:.2,onLoad:function(e){p.current=e,console.log(Date.now()-h.current)}})]}):Object(R.jsx)("div",{})}));var G=Object(p.b)((function(e){return{isSidebarOpen:e.sidebarReducer.isSidebarOpen}}),{})((function(e){return e.isSidebarOpen,Object(R.jsx)("div",{})}));var L={setGraphData:w},P=Object(p.b)((function(e){return{}}),L)((function(e){var t=e.setGraphData,n=Object(r.useState)(100),a=Object(j.a)(n,2),c=a[0],o=a[1];return Object(R.jsxs)("div",{children:[Object(R.jsx)("input",{value:c,onChange:function(e){var t=+e.target.value;isNaN(t)||o(t)}}),Object(R.jsx)("button",{onClick:function(){return t(c)},children:"Redraw"})]})}));c.a.render(Object(R.jsxs)(p.a,{store:h,children:[Object(R.jsx)(P,{}),Object(R.jsx)(C,{}),Object(R.jsx)(G,{})]}),document.getElementById("root")),o()}},[[319,1,2]]]);
//# sourceMappingURL=main.62d5f076.chunk.js.map